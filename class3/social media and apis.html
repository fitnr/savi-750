<!DOCTYPE html>
<html>
  <head>
    <title>Mining the Web - Class 4</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/slide.css"/>
  </head>
  <body>
    <textarea id="source">

layout:true

---

class: center, middle
![img-center-30](../images/pratt_logo.png)
#Mining the Web
###Neil Freeman
###Slides are available here: http://fitnr.github.io/savi-705/class4/

---
class:center,middle
#Day Four

---

#Goals for tonight
--

+ Discuss using social media data
--

+ Introduce application programming interfaces (APIs)
--

+ Query social media data using an API call

---

#Try installing Python
+ https://www.continuum.io/downloads

---

#Presentations
+ Visualization Critique
+ Project ideas

---

class:center,middle
#The trouble with social media

---

class:center,middle
![img](../images/sm1.png)

---

class:center,middle
![img](../images/sm2.png)

---

class:center,middle
![img](../images/sm3.png)

---

class:center,middle
![img-center-45](../images/sm4.png)

---

class:center,middle
![img-full](http://i.giphy.com/13GIgrGdslD9oQ.gif)
<h1 class="meme">I WANT THE SOCIAL MEDIA!</h1>

---

class:center,middle
![img-full](../images/sm5.png)
<h1 class="meme">YOU CAN'T HANDLE THE SOCIAL MEDIA!</h1>

---

class:center,middle
#Let's get some social media data

---

#Introduction to APIs
--

+ Application Program Interface (API)
--

+ A tool for making a website's data digestible for a computer

---

#API Steps
--

+ Make a request
--

+ Get a response
--

##&nbsp;

![img-full](../images/api1.png)

---

#API Request
--

+ Endpoint: http://endpoint.api.com/search?
--

+ Query terms: query=search_term
--

+ Authentication: client_id=123, client_secret=abc
--

#Put it all together for the request
--

+ http://endpoint.api.com/search?query=search_term&client_id=123&client_secret=abc

---

#API Response
--

![img-center-90](../images/api2.png)
--

![img-center-60](../images/api3.png)
--

###This is JSON (**J**ava**S**cript **O**bject **N**otation)

---

#Foursquare API Request
![img-center-80](../images/4s_api1.png)

---

#Foursquare API Request
![img-center-80](../images/4s_api2.png)

--

###Endpoint
--

+ `https://api.foursquare.com/v2/venues/search?`

---

#Foursquare API Request
![img-center-80](../images/4s_api3.png)
--

###Query Parameters
--

+ `ll=40.7037253789768,-74.0079939173954`
--

+ `radius=100`
--

+ `limit=50`

---

#Foursquare API Request
![img-center-80](../images/4s_api4.png)

---

#Foursquare API Request
![img-center-80](../images/4s_api4.png)

###Authentication
--

+ `client_id=TQTH2POSXDUDYOHKHXM0VKDRCBSSYAFUWMVSWBCI10URJBTR`
--

+ `client_secret=F3TEHU5APOLSMLSJZYZYUV1SOL5V0V2HUS150YXGTXFPINGS`
--

+ `v=20140609`

---

#API Response
![img](../images/4s_api_resp.png)

---

#Questions?
![img](../images/Batman-and-Robin-Running_meme.png)
###https://developer.foursquare.com/docs/venues/search 

---

#Let's do this
##https://foursquare.com/developers/apps  
+ Register for an account (if you donâ€™t have one already)
+ Create an application
+ Provide a URL (`http://www.pratt.edu` works just fine)
+ Get your client ID and client secret

---

#Exercise
##Get your own Foursquare venues data
+ For a location in NYC 40.729/-73.983
+ Find the 100 nearest Foursquare Venues
+ Clean the data in OpenRefine
+ Import to CARTO and style

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api1.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api2.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api3.png)

---

#Opening API Response directly in OpenRefine
![img-full](../images/or_api4.png)

---

#Removing Empty Rows
##Switch to rows
![img-full](../images/or_api5.png)

---

#Removing Empty Rows
##Text Facet on Column
![img-full](../images/or_api6.png)

---

#Removing Empty Rows
##Select "blank"
![img-full](../images/or_api7.png)

---

#Removing Empty Rows
##Remove All Matching Rows
![img-full](../images/or_api8.png)

---

#Removing Empty Rows
##Reset Facet
![img-full](../images/or_api9.png)


---

#Let's try some Python
![img-full](../images/python_dev.jpg)


---

#Readings
+ Obe, Regina, and Leo Hsu. PostGIS in action. Manning Publications Co., 2011, Pg 3-8.

---

#Assignment 1
+ Using an API, either of an open data portal such as the [NYC Open Data Portal](https://data.cityofnewyork.us/data) or some other open data source, create a visualization of the data in CARTO. Write a short (2-3 paragraph) description of the data, the API you used to access it, how you styled it, and the resulting visualization. Discuss other data you'd like to use or other techniques of cleaning the data to get your desired result. Submit your API code via the Slack channel in the format "lastname-assignment2.py" if you do your API query in Python or "lastname-assignment2.txt" if you did you query in OpenRefine.

---

#Assignment 2
+ Update your project plan for your final project with additional questions, data sources, ideas for visualizing, or other issues/challenges you've discovered.

---

#Resources 
+ [School of Data: Cleaning Data with OpenRefine](http://schoolofdata.org/handbook/recipes/cleaning-data-with-refine/)
+ [Enipedia OpenRefine Tutorial](http://enipedia.tudelft.nl/wiki/OpenRefine_Tutorial)

---

class: center,middle
#Any Issues? Questions?

---
class:center, middle
#See you next week

    </textarea>
    <script src="../assets/remark.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>